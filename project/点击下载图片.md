### 点击图片链接，直接下载
- 后端给图片链接，使用 `window.href.location` 是会直接在浏览器打开的，需要实现点击图片下载
- `a`标签添加`download` 属性，不在图片同域名下 `download` 属性无效

### 解决思路
- 通过 `canvas` 解决，将图片平铺到 `canvas` 上，再将 `canvas` 转换为 `base64`,解决跨域问题
- 生成a标签，添加点击事件和 `download`

```js
function downloadImg (src) {
  let canvas = document.createElement('canvas')
  let myCanvas = canvas.contText('2d')
  let image = new Image()
  image.sr = src
  image.onload = function () {
    let canvas = document.createElement('canvas')
    canvas.width = image.width
    canvas.height = image.height
    let context = canvas.getContext('2d')
    context.drawImage(image, 0, 0, image.width, image.height)
    let url = canvas.toDataURL('image/png') // 得到图片的base64编码数据
    let a = document.createElement('a') // 生成一个a元素
    let event = new MouseEvent('click') // 创建一个单击事件
    a.setAttribute('download', '') // 添加download属性
    a.href = url // 将生成的URL设置为a.href属性
    a.dispatchEvent(event) // 触发a的单击事件
  }
}
```

### pdf也有相同问题
- 解决方案是生成.zip文件，直接下载
